<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="utf-8" />
    <title>Swiper demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1" />
    <!-- Link Swiper's CSS -->
    <style>
        @import url(https://qwerewqwerew.github.io/source/style/reset.css);
    </style>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <!-- Demo styles -->
    <style>
        html,
        body {
            position: relative;
            height: 100%;
        }

        section.vh100 {
            width: 100%;
            height: 100vh;
            background: #ccc;
        }

        .swiper {
            width: 100%;
            height: 100%;
        }

        .swiper-slide {
            text-align: center;
            font-size: 18px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
    </style>
</head>

<body>
    <div class="swiper verticals">
        <div class="swiper-wrapper">
            <section class="vh100 swiper-slide"> 1 </section>
            <section class="vh100 swiper-slide"> 2 </section>
            <section class="vh100 swiper-slide"> 3 </section>
            <section class="swiper horizontals swiper-slide">
                <div class="swiper-wrapper">
                    <div class="swiper-slide" data-hash="slide1">Slide 1</div>
                    <div class="swiper-slide" data-hash="slide2">Slide 2</div>
                    <div class="swiper-slide" data-hash="slide3">Slide 3</div>
                    <div class="swiper-slide" data-hash="slide4">Slide 4</div>
                </div>
                <div class="swiper-pagination"></div>
            </section>
            <section class="vh100 swiper-slide"> 5 </section>
        </div>
    </div>
    <!-- Swiper JS -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <!-- Initialize Swiper -->
    <script>
        // ğŸ“š ë³€ìˆ˜: ìŠ¬ë¼ì´ë” ê°ì²´ë“¤ (ì§§ê²Œ)
        let vSwiper;   // ì„¸ë¡œ(Vertical) ìŠ¬ë¼ì´ë”
        let hSwiper;   // ê°€ë¡œ(Horizontal) ìŠ¬ë¼ì´ë”

        // ğŸ“š ìˆ«ì: ê° ì„¹ì…˜ ì¸ë±ìŠ¤ (0ë¶€í„° ì‹œì‘)
        const IDX_H = 3;  // ê°€ë¡œ ìŠ¬ë¼ì´ë”ê°€ ìˆëŠ” ì„¹ì…˜
        const IDX_5 = 4;  // 5ë²ˆì§¸ ì„¹ì…˜
        const IDX_3 = 2;  // 3ë²ˆì§¸ ì„¹ì…˜

        // ğŸ¯ í•¨ìˆ˜1: ê°€ë¡œ ìŠ¬ë¼ì´ë” ë§Œë“¤ê¸° (ì§§ì€ ì´ë¦„)
        function makeH() {
            console.log('[makeH] ê°€ë¡œ ìŠ¬ë¼ì´ë” ìƒì„±');

            // ë§ˆì§€ë§‰ ìŠ¬ë¼ì´ë“œ ë„ë‹¬
            function onEnd() {
                console.log('[makeH:onEnd] ë§ˆì§€ë§‰ ìŠ¬ë¼ì´ë“œ!');
                hSwiper.canNext = true;
            }
            // ì²« ìŠ¬ë¼ì´ë“œ ë„ë‹¬
            function onStart() {
                console.log('[makeH:onStart] ì²« ìŠ¬ë¼ì´ë“œ!');
                hSwiper.canPrev = true;
            }
            // ìŠ¬ë¼ì´ë“œ ì´ë™ ë
            function onDone() {
                console.log('[makeH:onDone] ìŠ¬ë¼ì´ë“œ ì´ë™ ë');
                // ë§ˆì§€ë§‰ì—ì„œ ì˜¤ë¥¸ìª½ ì´ë™ ì‹œ
                if (hSwiper.canNext && hSwiper.isEnd) {
                    console.log('[makeH:onDone] ë‹¤ìŒ(ì•„ë˜) ì„¹ì…˜ìœ¼ë¡œ ì´ë™');
                    vSwiper.allowTouchMove = true;
                    vSwiper.mousewheel.enable();
                    setTimeout(function() {
                        vSwiper.slideNext();
                        console.log('[makeH:onDone] vSwiper.slideNext() í˜¸ì¶œ');
                    }, 300);
                    hSwiper.canNext = false;
                }
                // ì²« ìŠ¬ë¼ì´ë“œì—ì„œ ì™¼ìª½ ì´ë™ ì‹œ
                if (hSwiper.canPrev && hSwiper.isBeginning) {
                    console.log('[makeH:onDone] ì´ì „(ìœ„) ì„¹ì…˜ìœ¼ë¡œ ì´ë™');
                    vSwiper.allowTouchMove = true;
                    vSwiper.mousewheel.enable();
                    setTimeout(function() {
                        vSwiper.slideTo(IDX_3);
                        console.log('[makeH:onDone] vSwiper.slideTo(IDX_3) í˜¸ì¶œ');
                    }, 300);
                    hSwiper.canPrev = false;
                }
            }

            hSwiper = new Swiper('.horizontals', {
                direction: 'horizontal',
                slidesPerView: 1,
                spaceBetween: 30,
                mousewheel: true,
                pagination: {
                    el: '.swiper-pagination',
                    clickable: true,
                },
                hashNavigation: {
                    watchState: true,
                },
                on: {
                    reachEnd: onEnd,
                    reachBeginning: onStart,
                    transitionEnd: onDone
                }
            });
            console.log('[makeH] ê°€ë¡œ ìŠ¬ë¼ì´ë” ì™„ì„±');
        }

        // ğŸ¯ í•¨ìˆ˜2: ì„¸ë¡œ ìŠ¬ë¼ì´ë” ë§Œë“¤ê¸° (ì§§ì€ ì´ë¦„)
        function makeV() {
            console.log('[makeV] ì„¸ë¡œ ìŠ¬ë¼ì´ë” ìƒì„±');

            // ìŠ¬ë¼ì´ë“œ ë°”ë€” ë•Œ
            function onChg() {
                console.log('[makeV:onChg] í˜„ì¬ ì„¹ì…˜:', this.activeIndex + 1);
                // ê°€ë¡œ ìŠ¬ë¼ì´ë” ì„¹ì…˜ì— ì™”ì„ ë•Œ
                if (this.activeIndex === IDX_H) {
                    console.log('[makeV:onChg] ê°€ë¡œ ìŠ¬ë¼ì´ë” ì„¹ì…˜! ì„¸ë¡œ ìŠ¤í¬ë¡¤ ì ê¸ˆ');
                    vSwiper.allowTouchMove = false;
                    vSwiper.mousewheel.disable();
                    // 5ë²ˆì§¸ì—ì„œ ì˜¨ ê²Œ ì•„ë‹ˆë©´ ê°€ë¡œ ìŠ¬ë¼ì´ë” ì²« ìŠ¬ë¼ì´ë“œë¡œ
                    if (this.previousIndex !== IDX_5) {
                        setTimeout(function () {
                            hSwiper.slideTo(0, 0);
                            console.log('[makeV:onChg] hSwiper.slideTo(0) í˜¸ì¶œ');
                        }, 50);
                    }
                } else {
                    console.log('[makeV:onChg] ì¼ë°˜ ì„¹ì…˜, ì„¸ë¡œ ìŠ¤í¬ë¡¤ í—ˆìš©');
                    vSwiper.allowTouchMove = true;
                    vSwiper.mousewheel.enable();
                }
            }
            // ìŠ¬ë¼ì´ë“œ ì´ë™ ì‹œì‘
            function onVStart() {
                console.log('[makeV:onVStart] ì´ë™ ì‹œì‘:', this.previousIndex + 1, 'â†’', this.activeIndex + 1);
                // 5ë²ˆì§¸ì—ì„œ 4ë²ˆì§¸(ê°€ë¡œ)ë¡œ ì´ë™í•  ë•Œ
                if (this.previousIndex === IDX_5 && this.activeIndex === IDX_H) {
                    console.log('[makeV:onVStart] 5â†’4, ê°€ë¡œ ìŠ¬ë¼ì´ë” ë§ˆì§€ë§‰ìœ¼ë¡œ');
                    vSwiper.allowTouchMove = false;
                    vSwiper.mousewheel.disable();
                    setTimeout(function () {
                        hSwiper.slideTo(3, 0);
                        console.log('[makeV:onVStart] hSwiper.slideTo(3) í˜¸ì¶œ');
                    }, 100);
                }
            }
            // ìŠ¬ë¼ì´ë“œ ì´ë™ ë
            function onVEnd() {
                console.log('[makeV:onVEnd] ì´ë™ ë');
                if (this.activeIndex === IDX_H) {
                    setTimeout(function () {
                        if (vSwiper.previousIndex !== IDX_5) {
                            hSwiper.update();
                            console.log('[makeV:onVEnd] hSwiper.update() í˜¸ì¶œ');
                        }
                    }, 100);
                }
            }

            vSwiper = new Swiper('.verticals', {
                direction: 'vertical',
                slidesPerView: 1,
                mousewheel: true,
                on: {
                    slideChange: onChg,
                    slideChangeTransitionStart: onVStart,
                    slideChangeTransitionEnd: onVEnd
                }
            });
            console.log('[makeV] ì„¸ë¡œ ìŠ¬ë¼ì´ë” ì™„ì„±');
        }

        // ğŸš€ ìŠ¬ë¼ì´ë” ë§Œë“¤ê¸° ì‹œì‘!
        console.log('[main] í”„ë¡œê·¸ë¨ ì‹œì‘');
        makeH(); // ê°€ë¡œ ìŠ¬ë¼ì´ë”
        makeV(); // ì„¸ë¡œ ìŠ¬ë¼ì´ë”
        console.log('[main] ëª¨ë“  ìŠ¬ë¼ì´ë” ì™„ì„±!');
    </script>
</body>

</html>